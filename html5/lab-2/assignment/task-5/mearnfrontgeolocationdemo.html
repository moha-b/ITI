<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" href="style.css">
    <script src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyB90FxtYG_ybAYXGkz0ybkmkboE2nEbezI&callback=displayMap"></script>
    <script>

        window.addEventListener('load', function () {
            mapView = document.getElementById('map-view');
            detailsView = document.getElementById('details-view');
        });

        function displayMap() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(getPosition, errorhandler);
            } else {
                mapView.innerText = "Sorry, your browser does not support Geolocation. Please update and try again!";
            }
        }
        function getDetails() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(getDataDetails, errorhandler);
            } else {
                detailsView.innerText = "Sorry, your browser does not support Geolocation. Please update and try again!";
            }
        }

        function getPosition(e) {
            lat = e.coords.latitude;
            lon = e.coords.longitude;
            let location = new google.maps.LatLng(lat, lon);
            let specs = { zoom: 17, center: location };
            new google.maps.Map(mapView, specs);
        }
        function getDataDetails(e) {
            let geolocation = {
                lat: e.coords.latitude,
                long: e.coords.longitude,
                accuracy: e.coords.accuracy,
                timeStamp: new Date(e.timestamp).toLocaleString()
            };

            for (const itemKey in geolocation) {
                let labelElement = document.createElement("label");
                labelElement.textContent = `${itemKey}:`;

                let pElement = document.createElement("p");
                pElement.textContent = geolocation[itemKey];

                detailsView.appendChild(labelElement);
                detailsView.appendChild(pElement);
            }
        }

        function errorhandler() {
            alert('Error');
        }
    </script>
</head>
<body>
<section id="main-view">
    <section id="buttons">
        <input type="button" value="Display Map" onclick="displayMap();"/>
        <input type="button" value="Detail Information" onclick="getDetails();"/>
    </section>
    <div id="view">
        <div id="map-view"></div>
        <div id="details-view"></div>
    </div>
</section>
</body>
</html>